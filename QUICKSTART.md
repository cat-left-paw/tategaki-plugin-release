# QUICKSTART（最短で使い始める）

このページは「まず動かしてみる」ための最短ガイドです。  
インストールがまだの方は、先に `INSTALL.md` を参照してください。

このプラグインには主に 2 つのモードがあります。

- **執筆モード（v1.2.0で新しくなりました）**：Obsidian の Markdown を直接編集する新方式（変換・同期なし）
    - 参照モード機能も統合され、Obsidian のノートと自動連携します
- **互換モード（TipTap版）**：v1.1.1以前の執筆モード（変換・同期あり）

---

## 1. Tategaki ビューを開く

※新規に書き始めたい場合は、先に Obsidian 側で「新規ノート」を作成してから開いてください。

起動方法はいくつかあります。

### 方法 A: リボン（左側のアイコン）から開く

左側のリボンにある「縦書きビューを開く」アイコンを押します。

### 方法 B: コマンドから開く

1. Obsidian で任意のノート（`.md`）を開きます
2. コマンドパレット（`Ctrl+P` / `Cmd+P`）を開きます
3. `縦書きビューを開く` を実行します

画面の右側に Tategaki ビューが開きます。

### 便利: ショートカットキーを割り当てる

Obsidian の 設定 → `ホットキー` から、`縦書きビューを開く` を検索してショートカットを割り当てると便利です。

---

## 2. 共通（どのモードでも）

### ペアノート（執筆モード）

新しい執筆モードでは、縦書きビューと Obsidian のノート（ペアノート）が連動します。

- ペアノートのタブにはアイコンが表示されます
- ペアノートを閉じると、縦書きビューも自動的に閉じられます
- ペアノートをアクティブにすると、自動的に縦書きビューに切り替わります

### 縦書き/横書きの切り替え

ツールバーの切り替えボタンで切り替えられます。

### 表示のカスタマイズ（テーマ/フォント/色 など）

- **ツールバーの設定ボタン**から、フォント、余白などを手軽に調整できます
- 設定画面のテーマ機能で、フォント、文字サイズ、行間、色などを保存して切り替えも可能です

---

## 3. 執筆モード（v1.2.0で新しくなりました）

### 編集してみる

新しい執筆モードでは、Obsidian の Markdown を直接編集します。**変換・同期の処理が不要**なため、従来の同期リスクがありません。

- 編集した内容は即座に Obsidian のノートに反映されます
- 同期バックアップは不要です（同期リスクがないため）

### 参照モードとの統合

執筆モード内で、Obsidian のノートをアクティブにすると、自動的に参照モード（縦書きビューを確認しながら Obsidian のノートを編集するモード）に切り替わります。

- ペアノートをクリックすると参照モードに
- 縦書きビューをクリックすると執筆モードに

### よく使う機能

- **ルビ（青空文庫形式）**: `｜漢字《かんじ》`（ツールバーで表示オン/オフ）
- **見出しの折りたたみ**: 見出しをクリックして折りたたみ/展開
- **見出しジャンプ**: ツールバーのアウトラインボタンから見出しを選択してジャンプ
- **文字装飾（太字/イタリック/ハイライト/見出しなど）**: ツールバー or 右クリック
- **リスト項目を上下に入れ替え**（アウトライナー風）
    - 横書き: `Ctrl` / `Cmd` + `↑` / `↓`
    - 縦書き: `Ctrl` / `Cmd` + `→` / `←`
- **画像の表示**: 標準 Markdown 画像、Obsidian の画像埋め込みに対応

### 制限事項

- `<font>` や `<ruby>` などの HTML タグは、そのままプレーンテキストとして表示されます
- HTML タグを使った装飾は反映されません（青空文庫形式のルビは正常に表示されます）

---

## 4. 互換モード（TipTap版）

v1.1.1以前の執筆モード（変換・同期あり）を「互換モード」として引き続き利用できます。

### 同期モード（自動 / 手動）

設定で「同期モード」を選べます。

- 自動同期: 編集に合わせて自動で反映されます
- 手動同期: 自分で保存操作をしたときだけ反映されます

### 同期バックアップ

同期の安全策として、同期のタイミングでバックアップが作成されます。

- 保存場所: `.obsidian/tategaki-sync-backups/`
- コマンド `直前の同期バックアップを開く/復元` から復元できます

### よく使う機能

- 検索・置換機能
- ソーステキスト編集: Markdown 文字列を直接編集
- 補助入力パネル: 別の入力方法で編集

> **注意**: 互換モードは近いうちに廃止予定です。新しい執筆モードの使用をおすすめします。

---

## 5. モバイルについて

小さい画面では編集が難しいため、執筆モードはあまりおすすめしません。
タブレット（できれば外部キーボード・マウスあり）であれば、用途によっては使用できます。

---

## 6. 制限事項

### 新しい執筆モード

- **ペアノート**: 対（ペア）になる Obsidian のノートを開いておく必要があります
- `<font>` や `<ruby>` などの HTML タグは、そのままプレーンテキストとして表示されます
- HTML タグを使った装飾は反映されません（青空文庫形式のルビは正常に表示されます）

### 互換モード（旧TipTap版）

- **未対応の HTML タグ**: 本文に `<div>` のような HTML タグ（`<...>`）が含まれていると、タグの種類によっては変換できず、編集画面で扱えない場合があります
    - タグを「文章として」含めたい場合はコードブロックに入れてください

```text
<div>これはタグではなく文字として見せたい</div>
```

- **重い原稿について**: 巨大なテキスト、特にルビを多用したテキストで表示や編集が重くなることがあります
    - ルビ表示をオフにする、「ソーステキスト編集」や「補助入力パネル」を使う、章ごとにノートを分割するなどの対策があります

---

## 7. 困ったとき（安全策）

### 互換モードの同期バックアップから復元

互換モードで変換や同期がうまくいかなかった場合に備えて、同期バックアップを使えます。

1. コマンドパレット（`Ctrl+P` / `Cmd+P`）
2. `直前の同期バックアップを開く/復元` を実行

### バックアップを整理したい

互換モードのバックアップは設定画面（またはコマンド）から「同期バックアップをゴミ箱へ移動」でまとめて消せます。

---

## 次に読む

- `INSTALL.md`: インストール/アンインストール（OS 別）
- `MANUAL.md`: 機能の詳しい説明
